<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tribe Social - Sosyal Medya</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Teko:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-body: #0a0a0e;
            --bg-card: #141419;
            --bg-glass: rgba(20, 20, 25, 0.95);
            --primary: #c4ff0e;
            --primary-glow: rgba(196, 255, 14, 0.4);
            --accent: #00d4ff;
            --text-main: #ffffff;
            --text-muted: #8b8b96;
            --border: rgba(255, 255, 255, 0.08);
            --red: #ff4757;
            --green: #2ed573;
            --gold: #ffd700;
            --font-main: 'Outfit', sans-serif;
            --font-head: 'Teko', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg-body);
            color: var(--text-main);
            font-family: var(--font-main);
            min-height: 100vh;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           3 S√úTUNLU TWITTER TARZI LAYOUT
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        .social-layout {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            max-width: 1200px;
            margin: 0 auto;
            padding-top: 70px;
            min-height: 100vh;
            gap: 0;
        }

        /* Sol Sidebar */
        .left-sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            padding: 20px;
            border-right: 1px solid var(--border);
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            border-radius: 30px;
            color: var(--text-main);
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .sidebar-link:hover {
            background: rgba(196, 255, 14, 0.1);
            color: var(--primary);
        }

        .sidebar-link.active {
            background: var(--primary);
            color: #000;
            font-weight: 600;
        }

        .sidebar-link i {
            width: 25px;
            font-size: 1.2rem;
        }

        .notif-badge {
            background: #ff4757;
            color: #fff;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: auto;
        }

        /* Merkez Feed */
        .center-feed {
            border-right: 1px solid var(--border);
            min-height: 100%;
        }

        .feed-header {
            position: sticky;
            top: 70px;
            background: rgba(10, 10, 14, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            z-index: 10;
        }

        .feed-header h2 {
            font-family: var(--font-head);
            font-size: 1.5rem;
            color: var(--primary);
        }

        /* Saƒü Sidebar - Etiketler */
        .right-sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            padding: 20px;
            overflow-y: auto;
        }

        .trends-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
        }

        .trends-title {
            font-family: var(--font-head);
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .trend-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
        }

        .trend-item:last-child {
            border-bottom: none;
        }

        .trend-item:hover {
            padding-left: 10px;
        }

        .trend-tag {
            color: var(--primary);
            font-weight: 600;
        }

        .trend-count {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Post Form */
        .post-form {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 20px;
        }

        .post-form-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #000;
            cursor: pointer;
            flex-shrink: 0;
        }

        .post-textarea {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            color: var(--text-main);
            font-family: var(--font-main);
            font-size: 1rem;
            resize: none;
            min-height: 80px;
        }

        .post-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .post-textarea::placeholder {
            color: var(--text-muted);
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .post-tools {
            display: flex;
            gap: 10px;
            position: relative;
        }

        .post-tool-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--text-muted);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .post-tool-btn:hover {
            background: var(--primary);
            color: #000;
            border-color: var(--primary);
        }

        .post-submit-btn {
            background: linear-gradient(135deg, var(--primary), #a8d900);
            border: none;
            color: #000;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .post-submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px var(--primary-glow);
        }

        .post-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .image-preview {
            margin-top: 15px;
            position: relative;
            display: none;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 12px;
            object-fit: cover;
        }

        .image-preview .remove-image {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
        }

        /* Emoji Picker - D√ºzeltilmi≈ü */
        .emoji-picker {
            position: absolute;
            bottom: 50px;
            left: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
            display: none;
            grid-template-columns: repeat(6, 1fr);
            gap: 4px;
            width: 220px;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .emoji-picker.active {
            display: grid;
        }

        .emoji-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.2s;
            text-align: center;
        }

        .emoji-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.15);
        }

        /* Feed */
        .feed {
            display: flex;
            flex-direction: column;
        }

        .post-card {
            background: transparent;
            border-bottom: 1px solid var(--border);
            padding: 20px;
            transition: all 0.3s;
        }

        .post-card:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .post-user-info {
            flex: 1;
        }

        .post-username {
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .post-username:hover {
            color: var(--primary);
        }

        .verified-badge {
            color: var(--accent);
            font-size: 0.85rem;
        }

        .post-time {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .post-content {
            line-height: 1.6;
            margin-bottom: 12px;
            word-wrap: break-word;
        }

        .post-image {
            width: 100%;
            max-height: 350px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .post-stats {
            display: flex;
            gap: 20px;
        }

        .stat-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: 20px;
            transition: all 0.3s;
        }

        .stat-btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .stat-btn.liked {
            color: var(--red);
        }

        .stat-btn.liked i {
            animation: heartBeat 0.3s ease;
        }

        @keyframes heartBeat {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }
        }

        .comments-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            display: none;
        }

        .comments-section.active {
            display: block;
        }

        .comment {
            display: flex;
            gap: 10px;
            padding: 10px 0;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: #000;
            flex-shrink: 0;
        }

        .comment-content {
            flex: 1;
        }

        .comment-username {
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .comment-text {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 3px;
        }

        .comment-time {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        .comment-form {
            display: flex;
            gap: 10px;
            margin-top: 12px;
        }

        .comment-input {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 10px 15px;
            color: var(--text-main);
            font-family: var(--font-main);
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .comment-submit {
            background: var(--primary);
            border: none;
            color: #000;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .comment-submit:hover {
            transform: scale(1.1);
        }

        /* Profile Modal */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .profile-modal.active {
            display: flex;
        }

        .profile-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            width: 100%;
            max-width: 550px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .profile-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .profile-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0 auto 12px;
            border: 3px solid var(--bg-card);
        }

        .profile-name {
            font-family: var(--font-head);
            font-size: 1.6rem;
            color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .profile-close {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: none;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
        }

        .profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .profile-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            color: var(--text-muted);
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
        }

        .profile-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .profile-posts {
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .login-required {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
        }

        .login-required a {
            color: var(--primary);
            text-decoration: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .social-layout {
                grid-template-columns: 1fr;
            }

            .left-sidebar,
            .right-sidebar {
                display: none;
            }

            .center-feed {
                border: none;
            }
        }

        @media (max-width: 768px) {
            .post-stats {
                gap: 10px;
            }

            .stat-btn {
                padding: 6px 8px;
                font-size: 0.85rem;
            }
        }

        /* Toast Notification Animasyonlarƒ± */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }

            to {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
        }
    </style>
</head>

<body>
    <div class="social-layout">
        <!-- Sol Sidebar -->
        <aside class="left-sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" id="feedLink" onclick="showFeedView(); return false;">
                    <i class="fas fa-home"></i>
                    <span>G√∂nderiler</span>
                </a>
                <a href="#" class="sidebar-link" id="notificationsLink" onclick="showNotifications(); return false;">
                    <i class="fas fa-bell"></i>
                    <span>Bildirimler</span>
                    <span class="notif-badge" id="notifBadge" style="display: none;">0</span>
                </a>
                <a href="#" class="sidebar-link" id="myProfileLink" onclick="showMyProfile(); return false;">
                    <i class="fas fa-user"></i>
                    <span>Hesabƒ±m</span>
                </a>
            </nav>
        </aside>

        <!-- Merkez Feed -->
        <main class="center-feed">
            <div class="feed-header">
                <h2 id="feedTitle"><i class="fas fa-comments"></i> Anasayfa</h2>
            </div>

            <!-- Center Feed Content (G√∂nderiler g√∂r√ºn√ºm√º) -->
            <div id="centerFeed">
                <!-- Post Form -->
                <div class="post-form" id="postForm" style="display: none;">
                    <div class="post-form-header">
                        <div class="user-avatar" id="currentUserAvatar">?</div>
                        <div>
                            <div style="font-weight: 600;" id="currentUserName">Y√ºkleniyor...</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted);">Herkese a√ßƒ±k</div>
                        </div>
                    </div>

                    <textarea class="post-textarea" id="postContent" placeholder="Neler oluyor?"></textarea>

                    <div class="image-preview" id="imagePreview">
                        <img id="previewImg" src="" alt="Preview">
                        <button class="remove-image" onclick="removeImage()"><i class="fas fa-times"></i></button>
                    </div>

                    <div class="post-actions">
                        <div class="post-tools">
                            <input type="file" id="imageInput" accept="image/*" style="display: none;"
                                onchange="handleImageSelect(event)">
                            <button class="post-tool-btn" onclick="document.getElementById('imageInput').click()"
                                title="Fotoƒüraf">
                                <i class="fas fa-image"></i>
                            </button>
                            <button class="post-tool-btn" onclick="toggleEmojiPicker()" title="Emoji">
                                <i class="fas fa-smile"></i>
                            </button>
                            <div class="emoji-picker" id="emojiPicker"></div>
                        </div>
                        <button class="post-submit-btn" onclick="submitPost()" id="submitBtn">
                            Payla≈ü
                        </button>
                    </div>
                </div>

                <!-- Login Required -->
                <div class="login-required" id="loginRequired">
                    <i class="fas fa-lock" style="font-size: 1.8rem; margin-bottom: 12px; display: block;"></i>
                    <p>G√∂nderi payla≈ümak i√ßin <a href="account.html">giri≈ü yapƒ±n</a></p>
                </div>

                <!-- Feed -->
                <div class="feed" id="feedContainer">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> G√∂nderiler y√ºkleniyor...
                    </div>
                </div>
            </div>
        </main>

        <!-- Saƒü Sidebar - Etiketler -->
        <aside class="right-sidebar">
            <div class="trends-box">
                <div class="trends-title">
                    <i class="fas fa-hashtag"></i> G√ºndem Etiketler
                </div>
                <div id="trendsList">
                    <div class="loading"><i class="fas fa-spinner fa-spin"></i></div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Profile Modal -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-content">
            <div class="profile-header">
                <button class="profile-close" onclick="closeProfileModal()"><i class="fas fa-times"></i></button>
                <div class="profile-avatar" id="profileAvatar">?</div>
                <div class="profile-name" id="profileName">
                    <span id="profileNameText">Kullanƒ±cƒ±</span>
                    <i class="fas fa-check-circle verified-badge" id="profileVerified" style="display: none;"></i>
                </div>
            </div>
            <div class="profile-tabs">
                <div class="profile-tab active" onclick="switchProfileTab('posts', this)">G√∂nderiler</div>
                <div class="profile-tab" onclick="switchProfileTab('likes', this)">Beƒüeniler</div>
            </div>
            <div class="profile-posts" id="profilePosts">
                <div class="loading"><i class="fas fa-spinner fa-spin"></i> Y√ºkleniyor...</div>
            </div>
        </div>
    </div>

    <script src="../firebase-config.js"></script>
    <script src="../data.js"></script>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üõ°Ô∏è K√úF√úR Fƒ∞LTRESƒ∞ VE YASAKLI KELƒ∞MELER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const BANNED_WORDS = [
            'amk', 'aq', 'mk', 'oc', 'o√ß', 'oe', 'pi√ß', 'pic', 'am', 'amcƒ±k', 'amcik',
            'sik', 'yarrak', 'yarak', 'orospu', 'orospu√ßocuƒüu', 'sikerim', 'sikeyim',
            'kahpe', 'pezevenk', 'g√∂t', 'got', 'ta≈üak', 'tasak', 'meme', 'kaltak',
            '≈üerefsiz', 'serefsiz', 'pu≈üt', 'pust', 'ibne', 'anan', 'anani', 'ananƒ±',
            'amƒ±na', 'amina', 'sikim', 'sikimin', 'siktir', 'amƒ±n', 'amin', 'g√∂t√ºne',
            'feryadƒ±', 'feryadi'
        ];

        const VERIFIED_ACCOUNTS = [
            'Galatasaray', 'Fenerbah√ße', 'Be≈üikta≈ü', 'Trabzonspor', 'Ba≈üak≈üehir',
            'Alanyaspor', 'Antalyaspor', 'Konyaspor', 'Samsunspor', 'Kayserispor',
            'G√∂ztepe', 'Gaziantep FK', 'Ey√ºpspor', 'Gen√ßlerbirliƒüi', 'Adana Demirspor',
            'TribeLeague', 'Admin'
        ];

        function filterBadWords(text) {
            let filtered = text;
            BANNED_WORDS.forEach(word => {
                const regex = new RegExp('\\b' + word + '\\b', 'gi');
                filtered = filtered.replace(regex, '####');
            });
            return filtered;
        }

        function isVerified(username) {
            return VERIFIED_ACCOUNTS.some(v => v.toLowerCase() === username?.toLowerCase());
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üòÄ EMOJƒ∞ Lƒ∞STESƒ∞
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const EMOJIS = [
            'üòÄ', 'üòÇ', 'ü§£', 'üòç', 'üòé', 'ü§î',
            'üò¢', 'üò°', 'üî•', 'üí™', 'üëç', 'üëé',
            '‚ù§Ô∏è', 'üíî', '‚öΩ', 'üèÜ', 'ü•á', 'üéâ',
            'üëè', 'üôå', 'üíØ', '‚ú®', 'üò±', 'ü§°'
        ];

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üîê KULLANICI DURUMU
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let currentUser = null;
        let allPosts = {};
        let currentProfileUserId = null;

        async function checkUserAuth() {
            console.log('üîê Kullanƒ±cƒ± kontrol√º ba≈ülƒ±yor...');
            try {
                // localStorage'dan tribeUser key'ini oku (account.html ile uyumlu)
                const storedUser = localStorage.getItem('tribeUser');
                console.log('üì¶ localStorage tribeUser:', storedUser ? 'VAR' : 'YOK');

                if (!storedUser) {
                    console.log('‚ùå tribeUser bulunamadƒ±');
                    showLoginRequired();
                    return;
                }

                // JSON parse et
                const userData = JSON.parse(storedUser);
                console.log('üìã User data:', userData.username);

                if (userData && userData.id && userData.username) {
                    currentUser = userData;
                    console.log('‚úÖ Kullanƒ±cƒ± bulundu:', currentUser.username);
                    showPostForm();
                } else {
                    console.log('‚ùå Kullanƒ±cƒ± verisi eksik');
                    showLoginRequired();
                }
            } catch (e) {
                console.error('‚ùå Auth kontrol hatasƒ±:', e);
                showLoginRequired();
            }
        }

        function showLoginRequired() {
            document.getElementById('postForm').style.display = 'none';
            document.getElementById('loginRequired').style.display = 'block';
        }

        function showPostForm() {
            document.getElementById('loginRequired').style.display = 'none';
            document.getElementById('postForm').style.display = 'block';

            const avatar = currentUser.username?.charAt(0).toUpperCase() || '?';
            document.getElementById('currentUserAvatar').textContent = avatar;
            document.getElementById('currentUserName').textContent = currentUser.username || 'Anonim';
        }

        function showFeedView() {
            // Feed g√∂r√ºn√ºm√ºne ge√ß
            document.getElementById('centerFeed').style.display = 'block';

            const myProfileView = document.getElementById('myProfileView');
            if (myProfileView) myProfileView.style.display = 'none';

            const notifView = document.getElementById('notificationsView');
            if (notifView) notifView.style.display = 'none';

            document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
            document.getElementById('feedLink').classList.add('active');
        }

        function showMyProfile() {
            if (!currentUser) {
                window.location.href = 'account.html';
                return;
            }

            // Kendi profilimi g√∂ster
            document.getElementById('centerFeed').style.display = 'none';
            document.getElementById('feedLink').classList.remove('active');
            document.getElementById('myProfileLink').classList.add('active');

            // Profil g√∂r√ºn√ºm√º olu≈ütur veya g√∂ster
            let profileView = document.getElementById('myProfileView');
            if (!profileView) {
                profileView = document.createElement('div');
                profileView.id = 'myProfileView';
                profileView.style.cssText = 'padding: 0;';
                document.querySelector('.center-feed').appendChild(profileView);
            }
            profileView.style.display = 'block';

            renderMyProfile();
        }

        function renderMyProfile() {
            const view = document.getElementById('myProfileView');
            const avatar = currentUser.username?.charAt(0).toUpperCase() || '?';
            const verified = isVerified(currentUser.username);

            // Kullanƒ±cƒ±nƒ±n g√∂nderileri
            const myPosts = Object.entries(allPosts)
                .filter(([id, p]) => p.userId === currentUser.id)
                .sort((a, b) => b[1].timestamp - a[1].timestamp);

            // Kullanƒ±cƒ±nƒ±n beƒüenileri
            const likedPosts = Object.entries(allPosts)
                .filter(([id, p]) => p.likes && p.likes[currentUser.id])
                .sort((a, b) => b[1].timestamp - a[1].timestamp);

            // Kullanƒ±cƒ±nƒ±n yeniden payla≈ütƒ±klarƒ± (retweet hen√ºz yok, bo≈ü bƒ±rak)
            const retweetedPosts = [];

            view.innerHTML = `
                <div style="background: linear-gradient(135deg, var(--primary), var(--accent)); padding: 30px; text-align: center;">
                    <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--bg-card); display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 700; color: var(--primary); margin: 0 auto 15px; border: 3px solid #fff;">
                        ${avatar}
                    </div>
                    <div style="font-family: var(--font-head); font-size: 1.8rem; color: #000; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        ${currentUser.username}
                        ${verified ? '<i class="fas fa-check-circle" style="color: #fff;"></i>' : ''}
                    </div>
                    ${currentUser.team ? `<div style="color: rgba(0,0,0,0.7); margin-top: 5px;"><i class="fas fa-futbol"></i> ${currentUser.team}</div>` : ''}
                </div>

                <div style="display: flex; border-bottom: 1px solid var(--border);">
                    <button class="my-profile-tab active" onclick="switchMyProfileTab('posts', this)" style="flex: 1; padding: 15px; background: none; border: none; color: var(--primary); border-bottom: 2px solid var(--primary); cursor: pointer; font-weight: 600;">
                        <i class="fas fa-pencil-alt"></i> G√∂nderiler <span style="color: var(--text-muted);">(${myPosts.length})</span>
                    </button>
                    <button class="my-profile-tab" onclick="switchMyProfileTab('likes', this)" style="flex: 1; padding: 15px; background: none; border: none; color: var(--text-muted); border-bottom: 2px solid transparent; cursor: pointer;">
                        <i class="fas fa-heart"></i> Beƒüeniler <span>(${likedPosts.length})</span>
                    </button>
                    <button class="my-profile-tab" onclick="switchMyProfileTab('retweets', this)" style="flex: 1; padding: 15px; background: none; border: none; color: var(--text-muted); border-bottom: 2px solid transparent; cursor: pointer;">
                        <i class="fas fa-retweet"></i> Repostlar <span>(${retweetedPosts.length})</span>
                    </button>
                </div>

                <div id="myProfileContent" style="padding: 0;">
                    ${renderMyPostsList(myPosts)}
                </div>
            `;
        }

        function switchMyProfileTab(tab, btn) {
            // Tab stillerini g√ºncelle
            document.querySelectorAll('.my-profile-tab').forEach(t => {
                t.style.color = 'var(--text-muted)';
                t.style.borderBottomColor = 'transparent';
            });
            btn.style.color = 'var(--primary)';
            btn.style.borderBottomColor = 'var(--primary)';

            const content = document.getElementById('myProfileContent');

            if (tab === 'posts') {
                const myPosts = Object.entries(allPosts)
                    .filter(([id, p]) => p.userId === currentUser.id)
                    .sort((a, b) => b[1].timestamp - a[1].timestamp);
                content.innerHTML = renderMyPostsList(myPosts);
            } else if (tab === 'likes') {
                const likedPosts = Object.entries(allPosts)
                    .filter(([id, p]) => p.likes && p.likes[currentUser.id])
                    .sort((a, b) => b[1].timestamp - a[1].timestamp);
                content.innerHTML = renderLikedPostsList(likedPosts);
            } else if (tab === 'retweets') {
                content.innerHTML = '<div class="empty-state" style="padding: 40px;"><i class="fas fa-retweet" style="font-size: 2rem; opacity: 0.5; margin-bottom: 10px; display: block;"></i><p>Hen√ºz repost yok</p></div>';
            }
        }

        function renderMyPostsList(posts) {
            if (posts.length === 0) {
                return '<div class="empty-state" style="padding: 40px;"><i class="fas fa-pencil-alt" style="font-size: 2rem; opacity: 0.5; margin-bottom: 10px; display: block;"></i><p>Hen√ºz g√∂nderi yok</p></div>';
            }
            return posts.map(([id, post]) => `
                <div style="padding: 15px 20px; border-bottom: 1px solid var(--border);">
                    <div style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 8px;">${getTimeAgo(post.timestamp)}</div>
                    <div style="line-height: 1.5;">${post.content || ''}</div>
                    ${post.imageUrl ? `<img src="${post.imageUrl}" style="max-width: 100%; border-radius: 10px; margin-top: 10px;">` : ''}
                    <div style="display: flex; gap: 15px; margin-top: 10px; color: var(--text-muted); font-size: 0.9rem;">
                        <span><i class="fas fa-heart"></i> ${post.likes ? Object.keys(post.likes).length : 0}</span>
                        <span><i class="fas fa-comment"></i> ${post.comments ? Object.keys(post.comments).length : 0}</span>
                    </div>
                </div>
            `).join('');
        }

        function renderLikedPostsList(posts) {
            if (posts.length === 0) {
                return '<div class="empty-state" style="padding: 40px;"><i class="fas fa-heart" style="font-size: 2rem; opacity: 0.5; margin-bottom: 10px; display: block;"></i><p>Hen√ºz beƒüeni yok</p></div>';
            }
            return posts.map(([id, post]) => `
                <div style="padding: 15px 20px; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--accent)); display: flex; align-items: center; justify-content: center; font-weight: 600; color: #000; font-size: 0.8rem;">
                            ${post.username?.charAt(0).toUpperCase() || '?'}
                        </div>
                        <span style="font-weight: 600;">${post.username}</span>
                        ${isVerified(post.username) ? '<i class="fas fa-check-circle" style="color: var(--accent); font-size: 0.85rem;"></i>' : ''}
                        <span style="color: var(--text-muted); font-size: 0.85rem;">${getTimeAgo(post.timestamp)}</span>
                    </div>
                    <div style="line-height: 1.5;">${post.content || ''}</div>
                    ${post.imageUrl ? `<img src="${post.imageUrl}" style="max-width: 100%; border-radius: 10px; margin-top: 10px;">` : ''}
                </div>
            `).join('');
        }


        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üìù G√ñNDERƒ∞ ƒ∞≈ûLEMLERƒ∞
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let selectedImage = null;

        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (file.size > 50 * 1024 * 1024) {
                alert('Dosya boyutu 50MB\'dan k√º√ß√ºk olmalƒ±!');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                selectedImage = e.target.result;
                document.getElementById('previewImg').src = selectedImage;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            selectedImage = null;
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('imageInput').value = '';
        }

        // Spam korumasƒ± deƒüi≈ükenleri
        let lastPostTime = 0;
        let spamAttempts = 0;
        const POST_COOLDOWN = 3000; // 3 saniye
        const SPAM_PENALTY = 5000; // +5 saniye ceza

        async function submitPost() {
            if (!currentUser) {
                showToast('L√ºtfen giri≈ü yapƒ±n!', 'error');
                return;
            }

            // Ban kontrol√º
            if (await isUserBanned()) {
                return;
            }

            // Spam korumasƒ± - Timeout kontrol√º
            const now = Date.now();
            const timeSinceLastPost = now - lastPostTime;
            const requiredCooldown = POST_COOLDOWN + (spamAttempts * SPAM_PENALTY);

            if (timeSinceLastPost < requiredCooldown) {
                const remaining = Math.ceil((requiredCooldown - timeSinceLastPost) / 1000);
                spamAttempts++;

                if (spamAttempts >= 3) {
                    // 1 saat ban uygula
                    await applySocialBan(currentUser.id, 60 * 60 * 1000); // 1 saat
                    showToast('üö´ Spam nedeniyle 1 saat sosyal medya ban\'ƒ± aldƒ±nƒ±z!', 'error');
                    spamAttempts = 0;
                    return;
                }

                showToast(`‚è≥ L√ºtfen ${remaining} saniye bekleyin! (Spam uyarƒ±sƒ± ${spamAttempts}/3)`, 'error');
                return;
            }

            const content = document.getElementById('postContent').value.trim();
            if (!content && !selectedImage) {
                showToast('L√ºtfen bir ≈üeyler yazƒ±n veya fotoƒüraf ekleyin!', 'error');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

            try {
                // Firebase hazƒ±r mƒ± kontrol et
                if (!window.firebaseDb) {
                    await waitForFirebase();
                }

                // Hashtagleri √ßƒ±kar
                const hashtags = extractHashtags(content);

                const post = {
                    userId: currentUser.id,
                    username: currentUser.username,
                    content: filterBadWords(content),
                    imageUrl: selectedImage || null,
                    timestamp: Date.now(),
                    likes: {},
                    comments: {},
                    hashtags: hashtags
                };

                await window.firebasePush(window.firebaseRef(window.firebaseDb, 'socialPosts'), post);

                document.getElementById('postContent').value = '';
                removeImage();

                // Ba≈üarƒ±lƒ± - spam sayacƒ±nƒ± sƒ±fƒ±rla
                lastPostTime = Date.now();
                spamAttempts = 0;

                // Toast notification
                showToast('‚úÖ G√∂nderi payla≈üƒ±ldƒ±!', 'success');

                // Etiketleri g√ºncelle
                updateTrends();
            } catch (e) {
                console.error('G√∂nderi hatasƒ±:', e);
                showToast('‚ùå Hata: ' + e.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Payla≈ü';
            }
        }

        // Ban kontrol√º
        async function isUserBanned() {
            if (!currentUser) return false;

            try {
                const banRef = window.firebaseRef(window.firebaseDb, `users/${currentUser.id}/socialBanUntil`);
                const snapshot = await window.firebaseGet(banRef);

                if (snapshot.exists()) {
                    const banUntil = snapshot.val();
                    if (Date.now() < banUntil) {
                        const remaining = Math.ceil((banUntil - Date.now()) / 60000);
                        showToast(`üö´ Sosyal medya ban\'ƒ±nƒ±z var! Kalan s√ºre: ${remaining} dakika`, 'error');
                        return true;
                    } else {
                        // Ban s√ºresi dolmu≈ü, kaldƒ±r
                        await window.firebaseRemove(banRef);
                    }
                }
            } catch (e) {
                console.error('Ban kontrol hatasƒ±:', e);
            }
            return false;
        }

        // Ban uygula
        async function applySocialBan(userId, durationMs) {
            const banUntil = Date.now() + durationMs;
            await window.firebaseSet(window.firebaseRef(window.firebaseDb, `users/${userId}/socialBanUntil`), banUntil);

            // Bildirim olu≈ütur
            await createNotification(userId, 'ban', 'Spam nedeniyle sosyal medya ban\'ƒ± aldƒ±nƒ±z.');
        }

        function extractHashtags(text) {
            const regex = /#(\w+)/g;
            const matches = text.match(regex);
            return matches ? matches.map(h => h.toLowerCase()) : [];
        }

        // Firebase hazƒ±r olana kadar bekle
        async function waitForFirebase() {
            let attempts = 0;
            while (!window.firebaseDb && attempts < 30) {
                await new Promise(r => setTimeout(r, 200));
                attempts++;
            }
            if (!window.firebaseDb) {
                throw new Error('Firebase baƒülantƒ±sƒ± kurulamadƒ±');
            }
        }

        // Toast Notification
        function showToast(message, type = 'success') {
            // Varsa eski toast'ƒ± kaldƒ±r
            const existingToast = document.querySelector('.toast-notification');
            if (existingToast) existingToast.remove();

            const toast = document.createElement('div');
            toast.className = 'toast-notification';
            toast.innerHTML = message;
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                left: 50%;
                transform: translateX(-50%);
                padding: 15px 30px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 9999;
                animation: slideDown 0.3s ease;
                ${type === 'success'
                    ? 'background: linear-gradient(135deg, var(--primary), #a8d900); color: #000;'
                    : 'background: linear-gradient(135deg, #ff4757, #ff6b7a); color: #fff;'
                }
            `;
            document.body.appendChild(toast);

            // 3 saniye sonra kaldƒ±r
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üì∞ FEED Y√úKLEMESƒ∞
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        async function loadPosts() {
            try {
                // Firebase hazƒ±r olana kadar bekle
                await waitForFirebase();

                window.firebaseOnValue(window.firebaseRef(window.firebaseDb, 'socialPosts'), (snapshot) => {
                    allPosts = snapshot.exists() ? snapshot.val() : {};
                    renderFeed();
                    updateTrends();
                });
            } catch (e) {
                console.error('Feed y√ºkleme hatasƒ±:', e);
                document.getElementById('feedContainer').innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Baƒülantƒ± hatasƒ±. Sayfayƒ± yenileyin.</p>
                    </div>
                `;
            }
        }

        function renderFeed() {
            const container = document.getElementById('feedContainer');
            const posts = Object.entries(allPosts).sort((a, b) => b[1].timestamp - a[1].timestamp);

            if (posts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-comments"></i>
                        <p>Hen√ºz g√∂nderi yok. ƒ∞lk sen payla≈ü!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = posts.map(([id, post]) => createPostHTML(id, post)).join('');
        }

        function createPostHTML(id, post) {
            const verified = isVerified(post.username);
            const avatar = post.username?.charAt(0).toUpperCase() || '?';
            const timeAgo = getTimeAgo(post.timestamp);
            const likeCount = post.likes ? Object.keys(post.likes).length : 0;
            const commentCount = post.comments ? Object.keys(post.comments).length : 0;
            const isLiked = currentUser && post.likes && post.likes[currentUser.id];

            // Silme yetkisi: kendi g√∂nderisi veya moderat√∂r
            const canDelete = currentUser && (post.userId === currentUser.id || currentUser.isSocialMod);

            // Hashtagleri renklendir
            let content = post.content || '';
            content = content.replace(/#(\w+)/g, '<span style="color: var(--primary);">#$1</span>');

            let commentsHTML = '';
            if (post.comments) {
                const comments = Object.entries(post.comments).sort((a, b) => a[1].timestamp - b[1].timestamp);
                commentsHTML = comments.slice(0, 5).map(([cId, c]) => `
                    <div class="comment">
                        <div class="comment-avatar">${c.username?.charAt(0).toUpperCase() || '?'}</div>
                        <div class="comment-content">
                            <div class="comment-username">
                                ${c.username}
                                ${isVerified(c.username) ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
                            </div>
                            <div class="comment-text">${c.content}</div>
                            <div class="comment-time">${getTimeAgo(c.timestamp)}</div>
                        </div>
                    </div>
                `).join('');
            }

            return `
                <div class="post-card" data-post-id="${id}">
                    <div class="post-header">
                        <div class="user-avatar" onclick="openProfile('${post.userId}', '${post.username}')">${avatar}</div>
                        <div class="post-user-info">
                            <div class="post-username" onclick="openProfile('${post.userId}', '${post.username}')">
                                ${post.username}
                                ${verified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
                            </div>
                            <div class="post-time">${timeAgo}</div>
                        </div>
                        ${canDelete ? `
                            <button class="delete-post-btn" onclick="deletePost('${id}', '${post.userId}')" title="G√∂nderiyi Sil" style="
                                background: none;
                                border: none;
                                color: var(--text-muted);
                                cursor: pointer;
                                padding: 8px;
                                border-radius: 50%;
                                transition: all 0.2s;
                                margin-left: auto;
                            " onmouseover="this.style.color='#ff4757';this.style.background='rgba(255,71,87,0.1)'" onmouseout="this.style.color='var(--text-muted)';this.style.background='none'">
                                <i class="fas fa-trash"></i>
                            </button>
                        ` : ''}
                    </div>
                    <div class="post-content">${content}</div>
                    ${post.imageUrl ? `<img class="post-image" src="${post.imageUrl}" alt="Post">` : ''}
                    <div class="post-stats">
                        <button class="stat-btn ${isLiked ? 'liked' : ''}" onclick="toggleLike('${id}')">
                            <i class="fas fa-heart"></i> ${likeCount}
                        </button>
                        <button class="stat-btn" onclick="toggleComments('${id}')">
                            <i class="fas fa-comment"></i> ${commentCount}
                        </button>
                        <button class="stat-btn" onclick="sharePost('${id}')">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                    <div class="comments-section" id="comments-${id}">
                        ${commentsHTML}
                        ${currentUser ? `
                            <div class="comment-form">
                                <input type="text" class="comment-input" id="comment-input-${id}" placeholder="Yorum yaz..." onkeypress="if(event.key==='Enter')submitComment('${id}')">
                                <button class="comment-submit" onclick="submitComment('${id}')">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function getTimeAgo(timestamp) {
            const seconds = Math.floor((Date.now() - timestamp) / 1000);
            if (seconds < 60) return 'Az √∂nce';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}dk`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}sa`;
            const days = Math.floor(hours / 24);
            if (days < 7) return `${days}g`;
            return new Date(timestamp).toLocaleDateString('tr-TR');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // # ETƒ∞KETLER (TRENDS)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function updateTrends() {
            const hashtagCounts = {};

            Object.values(allPosts).forEach(post => {
                // Sadece i√ßerikten hashtag √ßƒ±kar (√ßift sayƒ±mƒ± √∂nle)
                const tags = extractHashtags(post.content || '');
                // Benzersiz etiketler i√ßin Set kullan
                const uniqueTags = [...new Set(tags)];
                uniqueTags.forEach(tag => {
                    hashtagCounts[tag] = (hashtagCounts[tag] || 0) + 1;
                });
            });

            const sorted = Object.entries(hashtagCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            const container = document.getElementById('trendsList');

            if (sorted.length === 0) {
                container.innerHTML = '<div style="color: var(--text-muted); font-size: 0.9rem;">Hen√ºz etiket yok</div>';
                return;
            }

            container.innerHTML = sorted.map(([tag, count]) => `
                <div class="trend-item" onclick="searchHashtag('${tag}')">
                    <div class="trend-tag">${tag}</div>
                    <div class="trend-count">${count} g√∂nderi</div>
                </div>
            `).join('');
        }

        function searchHashtag(tag) {
            // TODO: Hashtag aramasƒ±
            alert(`${tag} etiketli g√∂nderiler`);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // ‚ù§Ô∏è BEƒûENƒ∞ VE YORUM
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        async function toggleLike(postId) {
            if (!currentUser) {
                alert('Beƒüenmek i√ßin giri≈ü yapƒ±n!');
                return;
            }

            const likeRef = window.firebaseRef(window.firebaseDb, `socialPosts/${postId}/likes/${currentUser.id}`);
            const snapshot = await window.firebaseGet(likeRef);

            if (snapshot.exists()) {
                await window.firebaseRemove(likeRef);
            } else {
                await window.firebaseSet(likeRef, true);
            }
        }

        function toggleComments(postId) {
            const section = document.getElementById(`comments-${postId}`);
            section.classList.toggle('active');
        }

        async function submitComment(postId) {
            if (!currentUser) return;

            const input = document.getElementById(`comment-input-${postId}`);
            const content = input.value.trim();
            if (!content) return;

            try {
                const comment = {
                    userId: currentUser.id,
                    username: currentUser.username,
                    content: filterBadWords(content),
                    timestamp: Date.now()
                };

                await window.firebasePush(window.firebaseRef(window.firebaseDb, `socialPosts/${postId}/comments`), comment);
                input.value = '';
            } catch (e) {
                alert('Yorum eklenemedi: ' + e.message);
            }
        }

        function sharePost(postId) {
            const url = window.location.href.split('?')[0] + `?post=${postId}`;
            navigator.clipboard.writeText(url).then(() => {
                alert('üîó Link kopyalandƒ±!');
            });
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üë§ PROFƒ∞L
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function openProfile(userId, username) {
            currentProfileUserId = userId;
            const modal = document.getElementById('profileModal');
            const avatar = document.getElementById('profileAvatar');
            const nameText = document.getElementById('profileNameText');
            const verified = document.getElementById('profileVerified');

            avatar.textContent = username?.charAt(0).toUpperCase() || '?';
            nameText.textContent = username;
            verified.style.display = isVerified(username) ? 'inline' : 'none';

            loadUserPosts(userId);
            modal.classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        function loadUserPosts(userId) {
            const container = document.getElementById('profilePosts');
            const userPosts = Object.entries(allPosts)
                .filter(([id, post]) => post.userId === userId)
                .sort((a, b) => b[1].timestamp - a[1].timestamp);

            if (userPosts.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>Hen√ºz g√∂nderi yok</p></div>';
                return;
            }

            container.innerHTML = userPosts.map(([id, post]) => `
                <div style="padding: 12px; border-bottom: 1px solid var(--border);">
                    <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 6px;">${getTimeAgo(post.timestamp)}</div>
                    <div style="font-size: 0.95rem;">${post.content || ''}</div>
                    ${post.imageUrl ? `<img src="${post.imageUrl}" style="max-width: 100%; border-radius: 8px; margin-top: 8px;">` : ''}
                </div>
            `).join('');
        }

        function loadUserLikes(userId) {
            const container = document.getElementById('profilePosts');
            const likedPosts = Object.entries(allPosts)
                .filter(([id, post]) => post.likes && post.likes[userId])
                .sort((a, b) => b[1].timestamp - a[1].timestamp);

            if (likedPosts.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>Hen√ºz beƒüeni yok</p></div>';
                return;
            }

            container.innerHTML = likedPosts.map(([id, post]) => `
                <div style="padding: 12px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 600; margin-bottom: 4px;">${post.username}</div>
                    <div style="font-size: 0.95rem;">${post.content || ''}</div>
                </div>
            `).join('');
        }

        function switchProfileTab(tab, element) {
            document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            if (tab === 'posts') {
                loadUserPosts(currentProfileUserId);
            } else if (tab === 'likes') {
                loadUserLikes(currentProfileUserId);
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üîî Bƒ∞LDƒ∞Rƒ∞M Sƒ∞STEMƒ∞
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let userNotifications = [];

        async function createNotification(userId, type, message, postId = null) {
            const notification = {
                type: type, // 'ban', 'delete', 'warning', 'like', 'comment'
                message: message,
                postId: postId,
                timestamp: Date.now(),
                read: false
            };

            await window.firebasePush(window.firebaseRef(window.firebaseDb, `notifications/${userId}`), notification);
        }

        async function loadNotifications() {
            if (!currentUser) return;

            window.firebaseOnValue(window.firebaseRef(window.firebaseDb, `notifications/${currentUser.id}`), (snapshot) => {
                if (snapshot.exists()) {
                    userNotifications = Object.entries(snapshot.val())
                        .map(([id, n]) => ({ id, ...n }))
                        .sort((a, b) => b.timestamp - a.timestamp);

                    // Okunmamƒ±≈ü bildirim sayƒ±sƒ±
                    const unreadCount = userNotifications.filter(n => !n.read).length;
                    const badge = document.getElementById('notifBadge');
                    if (unreadCount > 0) {
                        badge.textContent = unreadCount;
                        badge.style.display = 'inline-flex';
                    } else {
                        badge.style.display = 'none';
                    }
                } else {
                    userNotifications = [];
                    document.getElementById('notifBadge').style.display = 'none';
                }
            });
        }

        function showNotifications() {
            if (!currentUser) {
                window.location.href = 'account.html';
                return;
            }

            document.getElementById('centerFeed').style.display = 'none';
            const myProfileView = document.getElementById('myProfileView');
            if (myProfileView) myProfileView.style.display = 'none';

            document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
            document.getElementById('notificationsLink').classList.add('active');

            let notifView = document.getElementById('notificationsView');
            if (!notifView) {
                notifView = document.createElement('div');
                notifView.id = 'notificationsView';
                document.querySelector('.center-feed').appendChild(notifView);
            }
            notifView.style.display = 'block';

            renderNotifications();
            markNotificationsRead();
        }

        function renderNotifications() {
            const view = document.getElementById('notificationsView');

            if (userNotifications.length === 0) {
                view.innerHTML = `
                    <div style="padding: 20px; text-align: center;">
                        <h3 style="color: var(--primary); margin-bottom: 20px;"><i class="fas fa-bell"></i> Bildirimler</h3>
                        <div class="empty-state">
                            <i class="fas fa-bell-slash" style="font-size: 2rem; opacity: 0.5; margin-bottom: 10px;"></i>
                            <p>Hen√ºz bildirim yok</p>
                        </div>
                    </div>
                `;
                return;
            }

            view.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;"><i class="fas fa-bell"></i> Bildirimler</h3>
                    ${userNotifications.map(n => `
                        <div style="padding: 15px; background: ${n.read ? 'transparent' : 'rgba(196, 255, 14, 0.05)'}; border-bottom: 1px solid var(--border); display: flex; gap: 12px; align-items: center;">
                            <i class="fas ${getNotifIcon(n.type)}" style="color: ${getNotifColor(n.type)}; font-size: 1.2rem;"></i>
                            <div style="flex: 1;">
                                <div>${n.message}</div>
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-top: 4px;">${getTimeAgo(n.timestamp)}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function getNotifIcon(type) {
            const icons = {
                'ban': 'fa-ban',
                'delete': 'fa-trash',
                'warning': 'fa-exclamation-triangle',
                'like': 'fa-heart',
                'comment': 'fa-comment'
            };
            return icons[type] || 'fa-bell';
        }

        function getNotifColor(type) {
            const colors = {
                'ban': '#ff4757',
                'delete': '#ff6b7a',
                'warning': '#ffa502',
                'like': '#ff4757',
                'comment': 'var(--accent)'
            };
            return colors[type] || 'var(--primary)';
        }

        async function markNotificationsRead() {
            if (!currentUser || userNotifications.length === 0) return;

            for (const n of userNotifications.filter(x => !x.read)) {
                await window.firebaseSet(
                    window.firebaseRef(window.firebaseDb, `notifications/${currentUser.id}/${n.id}/read`),
                    true
                );
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üóëÔ∏è MESAJ Sƒ∞LME
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        async function deletePost(postId, postUserId) {
            if (!currentUser) return;

            const canDelete = (postUserId === currentUser.id) || currentUser.isSocialMod;

            if (!canDelete) {
                showToast('Bu g√∂nderiyi silme yetkiniz yok!', 'error');
                return;
            }

            if (!confirm('Bu g√∂nderiyi silmek istediƒüinize emin misiniz?')) return;

            try {
                await window.firebaseRemove(window.firebaseRef(window.firebaseDb, `socialPosts/${postId}`));

                // Yetkili sildiyse bildirim g√∂nder
                if (currentUser.isSocialMod && postUserId !== currentUser.id) {
                    await createNotification(
                        postUserId,
                        'delete',
                        '‚ö†Ô∏è G√∂nderiniz bir moderat√∂r tarafƒ±ndan silindi. L√ºtfen kurallara uyun.'
                    );
                }

                showToast('üóëÔ∏è G√∂nderi silindi', 'success');
            } catch (e) {
                console.error('Silme hatasƒ±:', e);
                showToast('‚ùå Silme hatasƒ±: ' + e.message, 'error');
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üòÄ EMOJƒ∞ PICKER
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function initEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            picker.innerHTML = EMOJIS.map(e =>
                `<button class="emoji-btn" onclick="insertEmoji('${e}')">${e}</button>`
            ).join('');
        }

        function toggleEmojiPicker() {
            document.getElementById('emojiPicker').classList.toggle('active');
        }

        function insertEmoji(emoji) {
            const textarea = document.getElementById('postContent');
            textarea.value += emoji;
            textarea.focus();
            document.getElementById('emojiPicker').classList.remove('active');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // üöÄ BA≈ûLAT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        document.addEventListener('DOMContentLoaded', async () => {
            initEmojiPicker();
            await checkUserAuth();
            loadPosts();
            loadNotifications();
        });

        document.addEventListener('click', (e) => {
            const picker = document.getElementById('emojiPicker');
            if (!e.target.closest('.post-tools')) {
                picker.classList.remove('active');
            }
        });

        document.getElementById('profileModal').addEventListener('click', (e) => {
            if (e.target.id === 'profileModal') {
                closeProfileModal();
            }
        });
    </script>

    <script src="../theme-switcher.js"></script>
</body>

</html>